
<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="htwg-bubble">

  <style>
    * {
        box-sizing: border-box;
    }
    .row::after {
        content: "";
        clear: both;
        display: block;
    }
    [class*="col-"] {
        float: left;
    }

    .col-1 {width: 10%;
            height: 0;
			padding-top: 10%;
			display: block;
			background: cyan;
    }
    .col-2 {width: 20%;}
    .col-3 {width: 30%;}
    .col-4 {width: 40%;}
    .col-5 {width: 50%;}
    .col-6 {width: 60%;}
    .col-7 {width: 70%;}
    .col-8 {width: 80%;}
    .col-9 {width: 90%;}
    .col-10 {width: 100%;}

    .showBorder{
      border: solid;
    }
  </style>

  <template>
      <div class="col-1">
        <content id="myContent">{{text}}</content>
      </div>
	  <div id="bubble"></div>
  </template>

</dom-module>

<script>
  Polymer({
    is: 'htwg-bubble',

    properties: {
      textColor: {
        type: String,
        value: "black"
      },
      active: {
        type: Boolean,
        value: false
      },
      backgroundColor: {
        type: String,
        value: "blue"
      },
      neighbors:{
        type: Array,
        value: []
      },
      text: {
        type:String,
        value: "."
      },
	  x: Number,
	  y: Number
    },
    attached: function(){
	//console.log(this.x + " " + this.y);
      if(this.active){
        this.text = "bla";//this.text;
      }
	  this.setNeighbors()
	  this.checkNeighbors()
    },

	setNeighbors: function() {
		var frame = document.getElementsByTagName("htwg-bubble-frame")[0];
		this.neighbors[0] = frame.$$('#x' +  this.x      + 'y' + (this.y - 1));
		this.neighbors[1] = frame.$$('#x' + (this.x + 1) + 'y' + (this.y -1));
		this.neighbors[2] = frame.$$('#x' + (this.x + 1) + 'y' +  this.y);
		this.neighbors[3] = frame.$$('#x' + (this.x + 1) + 'y' + (this.y + 1));
		this.neighbors[4] = frame.$$('#x' +  this.x      + 'y' + (this.y + 1));
		this.neighbors[5] = frame.$$('#x' + (this.x - 1) + 'y' + (this.y + 1));
		this.neighbors[6] = frame.$$('#x' + (this.x - 1) + 'y' +  this.y);
		this.neighbors[7] = frame.$$('#x' + (this.x - 1) + 'y' + (this.y - 1));
	},

	checkNeighbors: function() {
		console.log(this.x + " " + this.y + ": ");
		console.log(this.neighbors);
		for(i = 0; i < 8; i++) {
			var active;
			if(this.neighbors[i] == null) {
				active = true;
			} else {
				active = this.neighbors[i].active;
			}
			console.log(active);
		}
	}
  });
</script>