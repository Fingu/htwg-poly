
<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="htwg-thumbnail">

  <template>

    <style type="text/css">
      :host{
        padding-left: 20px;
        padding-bottom: 20px;
        word-wrap: normal !important;
        display: inline-block;
word-break: break-word !important;
        -webkit-user-select: none !important;
        -moz-user-select: none !important;
        -ms-user-select: none !important;

        user-select: none !important;
      };
      .container-rounded{
		    border-radius: 10px;
        padding: 0px; 
        width: 200px;
        height: 150px; 
        margin: 0px;
      }
      #title {
        opacity: 1;
        text-align: center;
      }

      .innerwrapper{
        background-color: var(--htwg-thumbnail-background-color,white);
        border-radius: 10px;
        padding: 20px; 
        margin: 0 auto; 
        display: flex;
        flex-direction: row;
        justify-content: center;
        
        position: relative;
      }
      .outerwrapper{
        background-color: "transparent";
        border-radius: 10px;
      }
      .outerwrapperactive{
        background-color: var(--htwg-thumbnail-background-color,white);
        border-radius: 10px;
      }

      hr{
        border: 0;
        height: 1px;
        background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));
      }

      ul {
       list-style:none;
       text-align: center;
       padding-left: 0px;
      }
      .markednumtest{
        position: absolute;
        width:1.3vw;
        border: solid 1px #fff;
        border-radius: 35vw;
        text-align: center;
        color: red;
        font-weight: bold;
        right: -10px;
        top: -10px;
        -moz-box-shadow:    1px 1px 1px 1px #ccc;
        -webkit-box-shadow: 1px 1px 1px 1px #ccc;
        box-shadow:         1px 1px 1px 1px #ccc;
        visibility: hidden;
      }
    </style>
    

    <div class="outerwrapper" id="wrapper"  on-mouseout="fadeIn" on-mouseover="fadeOut">
        <div class="innerwrapper" on-tap="tapFunction" >
          <!-- Div with the icon background-->
          <input id="markedcounter"type="text" value="0" readonly class="markednumtest"></input>
          <div id="container" class="container-rounded"></div>
            
          </div>
        

          <!-- represents the content and the title -->
          <h3 id="title">{{title}}</h3>

          <div id="content">
            <hr>
            <ul>
              <content></content>
            </ul>
        </div>
    </div>
  </template>

</dom-module>

<script>
  Polymer({
    is: 'htwg-thumbnail',

    properties: {
      textColor: {
        type: String,
        value: "black"
      },
      textSize: { 
        type: Number,
        value: 10
      },
      textFamily:{
        type: String,
        value: "Arial"
      },
      active: {
        type: Boolean,
        value: false
      },
      marked: {
        type: Number,
        value: 0,
        observer: "__gotMarked"
      },
      display: {
        type: Boolean,
        value: false
      },
      title: {
        type: String,
        value: "Title"
      },
      width: {
        type: Number,
        value: 10
      },
      height: {
        type: Number,
        value: 10
      },
      icon: {
        type: String,
        value: ""
      },
      // Boolean dafÃ¼r ob Element ausgegraut wird oder nicht
      visibleElement: {
        type: Boolean,
        value: true,
        observer: "_visibleChanged"
      }

    }, fadeIn: function(){
          this.active = true;
          this.$.wrapper.className = "outerwrapper";  
          this.$.wrapper.style.opacity = 1;
          this.$.wrapper.style.transition = "ease-in 0.5s";
          this.$.content.style.opacity = 0;
          this.$.content.style.transition = "ease-out 0.5s";
    }, fadeOut: function(){
          this.active = false;
          this.$.wrapper.className = "outerwrapperactive";
          this.$.wrapper.style.opacity = 1;
          this.$.wrapper.style.transition = "ease-out 1.0s";
          this.$.content.style.opacity = 1;
          this.$.content.style.transition = "ease-in 0.5s";    
    },
    __gotMarked: function(){
      //Zahlen oben einblenden/ausblenden und setzen
      //Bei ipad oder kleiner (1024) werden Zahlen angezeigt
          if (!window.matchMedia("(min-width: 1024px)").matches) {
              if(this.marked > 0){
                this.$.markedcounter.value = this.marked;
                this.$.markedcounter.style.visibility = "visible";
              }
              else{
                this.$.markedcounter.style.visibility = "hidden";
              }
          }

    },
    // Thumbnail ausgrauen oder nicht
    _visibleChanged: function(){
      //Bei Ipad oder kleiner(1024px) wird nichtmehr ausgegraut
      if (window.matchMedia("(min-width: 1024px)").matches) {
          if(this.visibleElement){
              this.style.opacity = 1.0;
          }else{
              this.style.opacity = 0.5;
          }
     }
    },
     tapFunction: function(){
      if (!this.active){
        this.fadeIn();
      } else {
        this.fadeOut();
      }
    },



    attached:function(){
      this.$.content.style.opacity = 0;
      this.$$(".outerwrapper").style.width = this.width + "vw";
      this.$$(".innerwrapper").style.height = this.height + "vh";

      this.$$(".container-rounded").style.width = (this.width-1) + "vw";
      this.$$(".container-rounded").style.height = (this.height-1) + "vh";
      this.$$(".container-rounded").style.backgroundImage = "url('"+this.icon+"')";
      this.$$(".container-rounded").style.backgroundRepeat = "no-repeat";
      this.$$(".container-rounded").style.backgroundSize = " auto 95%";
      this.$$(".container-rounded").style.backgroundPosition = "center";
    }

  });
</script>