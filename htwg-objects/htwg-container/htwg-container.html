
<link rel="import" href="../../bower_components/polymer/polymer.html">
<script src="https://code.jquery.com/jquery-2.1.4.js"></script>


<dom-module id="htwg-container">

  <style>
    :host([active]) {
      height: 100vh;
    	width: 100vw;
    	transition: height 2s;
    	display: block;
    }
	  :host {
	  	height: 0px;
	  }
    .contentclass{
      position: relative;
      top: 10vh;
    }
  	.backgroundArea{
  		height: inherit;
  		overflow: hidden;
  	}
  	.closecontainer{
  		position: absolute;
  		right: 5vw;
  	}
  </style>

  <template>
  	<div class="backgroundArea" id="test">
  		<div class="contentclass">
  		<img src="../../images/closebutton-over.png" class="closecontainer" on-tap="close"></img>
  			<content></content>
  		</div>
  	</div>
  </template>

</dom-module>

<script>
  Polymer({
    is: 'htwg-container',

    properties: {
      active: {
        type: Boolean,
        value: false,
    		reflectToAttribute: true,
    		notify: true,
        observer: "_activeChanged"
      },
    },
    attached: function(){
    
    },
	close: function(){
    this.style.transition = "height 2s";
		this.active = false;

    var positionTop = this.$.test.getBoundingClientRect().top + window.scrollY - window.innerHeight;
    $('body, html').animate({scrollTop: positionTop});
    
	},
  closeWithAnimation:function(){
    this.style.transition = "height 0s";
    this.active = false;
  },
  _activeChanged: function(){
    if(this.active){
          var listElements = document.getElementsByTagName("htwg-container");
          for(i = 0; i < listElements.length; i++){
            if(listElements[i] != this){
              listElements[i].closeWithAnimation();
              listElements[i].active = false;
            }
          }


    var positionTop = this.$.test.getBoundingClientRect().top + window.scrollY;
    $('body, html').animate({scrollTop: positionTop});

    }
  }
  
  });
</script>